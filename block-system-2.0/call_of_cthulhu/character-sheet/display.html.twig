{% import _self as sheet %}
{# ------------------------- #}
{% macro genSkill(id = 1, name = '', value = '', oname = '') %}{% if name != '' %}{% if oname != '' %}{% set name = oname %}{% endif %}{% if oname != "" and value != "" %}
{% set eo = "od sk" %}{% if id is even %}{% set eo = "ev sk" %}{% endif %}
{% set v = "0" %}{% if value is defined and value > 0 %}{% set v = value %}{% endif %}{% if v < 10 %}{% set v = '0' ~ v %}{% endif %}
<tr><td class="tdskn {{eo}}">{{name}}</td><td class="tdskv {{eo}}">{{v}}</td><td class="tdsku {{eo}}"><div title="Skill divided by 2" class="bb">{{ v // 2}}</div><div title="Skill divided by 5">{{ v // 5}}</div></td></tr>{% endif %}{% endif %}{% endmacro genSkill %}
{# ------------------------- #}
{% macro genAlert(s) %}
{% if s is defined and s != '' %}<span class="alert alert-danger">{{s}}</span>{% endif %}
{% endmacro genAlert %}
{# ------------------------- #}
{% macro genPills(curr, max, start) %}
    {% if curr is defined and max is defined and max > 0 %}
        {% for i in start..max %}
            {% set x = i %}
            {% if x < 10 %}{% set x = '0' ~ x %}{% endif %}
            {% if i == curr %}
                <span class="solidpill">{{x}}</span>
            {% else %}
                <span class="emptypill">{{x}}</span>
            {% endif %}
        {% endfor %}
    {% endif %}
{% endmacro genPills %}
{# ------------------------- #}
{% macro genWeapon(id, name, reg, hard, ext, damage, range, att, ammo, malf) %}
    {% if name is defined and name != '' %}{% set eo = "od" %}{% if id is even %}{% set eo = "ev" %}{% endif %}
    <tr>
        <td class="{{eo}} pl">{{name}}</td>
        <td class="{{eo}} tdc" title="+DB: add damage bonus">{{damage}}</td>
        <td class="{{eo}} tdc">{{range}}</td>
        <td class="{{eo}} tdc">{{att}}</td>
        {% if range > 0 %}<td class="{{eo}} tdc">{{ammo}}</td><td class="{{eo}} tdc" title="chance of malfunction">{{malf}}</td>{% else %}<td class="{{eo}} tdc">-</td><td class="{{eo}} tdc" title="chance of malfunction">-</td>{% endif %}
        <td class="{{eo}} tdc">{{reg}}</td>
        <td class="{{eo}} tdc">{{hard}}</td>
        <td class="{{eo}} tdc">{{ext}}</td>
    </tr>
    {% endif %}
{% endmacro genWeapon %}
{# ------------------------- #}
<div class="container-fluid coc-sheet">
{% set dmgbonus = "0" %}{% set build = "0" %}
{% if variables.strength is defined and variables.size is defined %}
    {% set tmp = variables.strength + variables.size %}
    {% set dmgbonus = "-2" %}{% set build = "-2" %}
    {% if tmp > 64 %}{% set dmgbonus = "-1" %}{% set build = "-1" %}{% endif %}
    {% if tmp > 84 %}{% set dmgbonus = "0" %}{% set build = "0" %}{% endif %}
    {% if tmp > 124 %}{% set dmgbonus = "1d4" %}{% set build = "+1" %}{% endif %}
    {% if tmp > 164 %}{% set dmgbonus = "1d6" %}{% set build = "+2" %}{% endif %}
{% endif %}
{% set mov = "?" %}
    {% if variables.dexterity is defined and  variables.strength is defined and variables.size is defined %}
    {% if variables.dexterity + variables.strength >= variables.size %}{% set mov = 7 %}{% endif %}
    {% if variables.strength >= variables.size %}{% set mov = 8 %}{% endif %}
    {% if variables.dexterity >= variables.size %}{% set mov = 8 %}{% endif %}
    {% if variables.dexterity > variables.size %}
    {% if variables.strength > variables.size %}{% set mov = 9 %}{% endif %}
    {% endif %}
    {% if variables.age is defined %}
        {% if variables.age // 10 == 4 %}{% set mov = mov -1 %}{% endif %}
        {% if variables.age // 10 == 5 %}{% set mov = mov -2 %}{% endif %}
        {% if variables.age // 10 == 6 %}{% set mov = mov -3 %}{% endif %}
        {% if variables.age // 10 == 7 %}{% set mov = mov -4 %}{% endif %}
        {% if variables.age // 10 == 8 %}{% set mov = mov -5 %}{% endif %}
    {% endif %}
{% endif %}
{% set hp = (variables.constitution + variables.size) // 10 %}
{% if variables.skill_value_11 is defined and variables.skill_value_11 > 0 %}{% set dodge = variables.skill_value_11 %}{% else %}{% set dodge = variables.dexterity // 2 %}
{% endif %}
{% set flair = variables.flair|default('1920s')|lower %}{% if flair == '' %}{% set flair = '1920s' %}{% endif %}
    <div class="row">
        <div class="col-lg-12 hidden-md hidden-xs hidden-sm d-none d-lg-block">
            <div class="row logo" title="Call of Cthulhu Logo"> <!-- CoC Logo --></div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-md-12 col-lg-6">
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Investigator Sheet - {{flair|capitalize}}</span></div>
                <div class="card-body">
                    <table width="100%">
                        <tr><td class="tdl" width="40%">Name</td><td class="tdr"> {% if variables.name is defined %}{{ variables.name}}{% endif %}</td></tr>
                        <tr><td class="tdl">Occupation</td><td class="tdr"> {% if variables.occupation is defined %}{{ variables.occupation}}{% endif %}</td></tr>
                        <tr><td class="tdl">Age</td><td class="tdr"> {% if variables.age is defined %}{{ variables.age}}{% endif %}</td></tr>
                        <tr><td class="tdl">Sex</td><td class="tdr"> {% if variables.sex is defined %}{{ variables.sex}}{% endif %}</td></tr>
                        <tr><td class="tdl">Residence</td><td class="tdr"> {% if variables.residence is defined %}{{ variables.residence}}{% endif %}</td></tr>
                        <tr><td class="tdl">Birthplace</td><td class="tdr"> {% if variables.birthplace is defined %}{{ variables.birthplace}}{% endif %}</td></tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-12 col-lg-6">
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Characteristics</span></div>
                <div class="card-body">
                    <table class="marginsm">
                    <tr>
                        <th rowspan="2" class="tdb" title="Strength">STR</th>
                        <td rowspan="2" class="tdbbl" >{{ variables.strength }}</td>
                        <td class="tdsu">{{ variables.strength // 2 }}</td>
                        <th rowspan="2" class="tdb" title="Dexterity">DEX</th>
                        <td rowspan="2" class="tdbbl" >{{ variables.dexterity }}</td>
                        <td class="tdsu">{{ variables.dexterity // 2 }}</td>
                        <th rowspan="2" class="tdb" title="Intelligence">INT<br><small>Idea</small></th>
                        <td rowspan="2" class="tdbbl" >{{ variables.intelligence }}</td>
                        <td class="tdsu">{{ variables.intelligence // 2 }}</td>
                    </tr>
                    <tr>
                        <td class="tdsl">{{ variables.strength // 5 }}</td>
                        <td class="tdsl">{{ variables.dexterity // 5 }}</td>
                        <td class="tdsl">{{ variables.intelligence // 5 }}</td>
                    </tr>
                    <tr>
                        <th rowspan="2" class="tdb" title="Constitution">CON</th>
                        <td rowspan="2" class="tdbbl" >{{ variables.constitution }}</td>
                        <td class="tdsu">{{ variables.constitution // 2 }}</td>
                        <th rowspan="2" class="tdb" title="Appearance">APP</th>
                        <td rowspan="2" class="tdbbl" >{{ variables.appearance }}</td>
                        <td class="tdsu">{{ variables.appearance // 2 }}</td>
                        <th rowspan="2" class="tdb" title="Power">POW</th>
                        <td rowspan="2" class="tdbbl" >{{ variables.power }}</td>
                        <td class="tdsu">{{ variables.power // 2 }}</td>
                    </tr>
                    <tr>
                        <td class="tdsl">{{ variables.constitution // 5 }}</td>
                        <td class="tdsl">{{ variables.appearance // 5 }}</td>
                        <td class="tdsl">{{ variables.power // 5 }}</td>
                    </tr>
                    <tr>
                        <th rowspan="2" class="tdb" title="Size">SIZ</th>
                        <td rowspan="2" class="tdbbl" >{{ variables.size }}</td>
                        <td class="tdsu">{{ variables.size // 2 }}</td>
                        <th rowspan="2" class="tdb" title="Education">EDU</th>
                        <td rowspan="2" class="tdbbl" >{{ variables.education }}</td>
                        <td class="tdsu">{{ variables.education // 2 }}</td>
                        <th rowspan="2" class="tdm">Move<br>Rate</th>
                        <td rowspan="2" class="tdbbl" >{{mov}}</td>
                        <td >&nbsp;</td>
                    </tr>
                    <tr>
                        <td class="tdsl">{{ variables.size // 5 }}</td>
                        <td class="tdsl">{{ variables.education // 5 }}</td>
                        <td >&nbsp;</td>
                    </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-md-12 col-lg-3">
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Combat</span></div>
                <div class="card-body">
                    <table width="100%">
                        <tr>
                            <td class="tdb">Damage Bonus</td>
                            <td colspan="2" class="tdbbl">{{dmgbonus}}</td>
                        </tr>
                        <tr>
                            <td class="tdb">Build</td>
                            <td colspan="2" class="tdbbl">{{build}}</td>
                        </tr>
                        <tr>
                            <td rowspan="2" class="tdb">Dodge</td>
                            <td rowspan="2" class="tdbbl">{{dodge}}</td>
                            <td title="Dodge divided by 2"class="tdsu">{{dodge // 2}}</td>
                        </tr>
                        <tr>
                            <td title="Dodge divided by 2"class="tdsl">{{dodge // 5}}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-12 col-lg-9">
            <div class="card my-2 weapontable of">
                <div class="card-header head-bar"><span class="wbg">Weapons</span></div>
                <div class="card-body">
                    <table width="100%">
                    <tr>
                        <td class="pl">Name</td>
                        <td class="tdc" title="Damage">Dmg</td>
                        <td class="tdc">Range</td>
                        <td class="tdc">Attacks</td>
                        <td class="tdc" title="Ammo">#</td>
                        <td class="tdc" title="chance of malfunction">Malf.</td>
                        <td class="tdc" title="Regular">R</td>
                        <td class="tdc" title="Hard">H</td>
                        <td class="tdc" title="Extreme">E</td>
                    </tr>
                    {{ sheet.genWeapon("01", variables.weapon_name_01, variables.weapon_reg_01, variables.weapon_hard_01, variables.weapon_ext_01, variables.weapon_damage_01, variables.weapon_range_01, variables.weapon_attacks_01, variables.weapon_ammo_01, variables.weapon_malf_01) }}
                    {{ sheet.genWeapon("02", variables.weapon_name_02, variables.weapon_reg_02, variables.weapon_hard_02, variables.weapon_ext_02, variables.weapon_damage_02, variables.weapon_range_02, variables.weapon_attacks_02, variables.weapon_ammo_02, variables.weapon_malf_02) }}
                    {{ sheet.genWeapon("03", variables.weapon_name_03, variables.weapon_reg_03, variables.weapon_hard_03, variables.weapon_ext_03, variables.weapon_damage_03, variables.weapon_range_03, variables.weapon_attacks_03, variables.weapon_ammo_03, variables.weapon_malf_03) }}
                    {{ sheet.genWeapon("04", variables.weapon_name_04, variables.weapon_reg_04, variables.weapon_hard_04, variables.weapon_ext_04, variables.weapon_damage_04, variables.weapon_range_04, variables.weapon_attacks_04, variables.weapon_ammo_04, variables.weapon_malf_04) }}
                    {{ sheet.genWeapon("05", variables.weapon_name_05, variables.weapon_reg_05, variables.weapon_hard_05, variables.weapon_ext_05, variables.weapon_damage_05, variables.weapon_range_05, variables.weapon_attacks_05, variables.weapon_ammo_05, variables.weapon_malf_05) }}
                    {{ sheet.genWeapon("06", variables.weapon_name_06, variables.weapon_reg_06, variables.weapon_hard_06, variables.weapon_ext_06, variables.weapon_damage_06, variables.weapon_range_06, variables.weapon_attacks_06, variables.weapon_ammo_06, variables.weapon_malf_06) }}
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-md-3 col-lg-3 my-2">
            <div class="card my-2 of">
{% set s = '' %}{% if variables.hit_points_current is defined and variables.hit_points_current < 1 %}{% set s = 'Unconscious' %}
{% if variables.major_wound is defined and variables.major_wound == 1 %}{% set s = 'Dying' %}{% endif %}
{% else %}
{% if variables.major_wound is defined and variables.major_wound == 1 %}{% set s = 'Major Wound' %}{% endif %}
{% endif %}
                <div class="card-header head-bar"><span class="wbg">Hitpoints</span>{% if s != '' %}{{ sheet.genAlert( s ) }}{% endif %}</div>
                <div class="card-body">
                {{ sheet.genPills( variables.hit_points_current , hp ) }}
                </div>
            </div>
        </div>
        <div class="col-12 col-md-9 col-lg-9 my-2">
            <div class="card my-2 of">
{% set s = '' %}
{% if variables.sanity_current is defined and variables.sanity_current == 0 %}
{% if variables.temp_insane is defined and variables.temp_insane == 1 %}{% set s = 'Temporarily Insane' %}{% endif %}
{% if variables.indef_insane is defined and variables.indef_insane == 1 %}{% set s = 'Indefinitely Insane' %}{% endif %}
{% endif %}
{% set mx = 99 %}
{% if variables.skill_value_9 is defined %}{% set mx = 99 - variables.skill_value_9 %}{% endif %}
                <div class="card-header head-bar"><span class="wbg">Sanity</span>{% if s != '' %}{{ sheet.genAlert( s ) }}{% endif %}</div>
                <div class="card-body">
                {{ sheet.genPills( variables.sanity_current , mx, 0 ) }}
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-md-9 col-lg-9">
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Luck</span>{% if variables.luck_current is defined and variables.luck_current == 0 %}{{ sheet.genAlert( "Out of Luck" ) }}{% endif %}</div>
                <div class="card-body">
                {{ sheet.genPills( variables.luck_current , variables.luck_max, 0 ) }}
                </div>
            </div>
        </div>
        <div class="col-12 col-md-3 col-lg-3">
            <div class="card my-2 of">
{% set mx = 0 %}
{% if variables.power is defined %}{% set mx = variables.power // 5 %}{% endif %}
                <div class="card-header head-bar"><span class="wbg">Magic Points</span></div>
                <div class="card-body">
                {{ sheet.genPills( variables.magic_points_current , mx, 0 ) }}
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-md-12 col-lg-12 of">
            <div class="card my-2">
                <div class="card-header head-bar"><span class="wbg">Investigator Skills</span></div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-12 col-md-12 col-lg-4">
                                <table class="skilltable">
                                    {% set i = 0 %}
                                    {% if flair == "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Accounting (10%)', '10') }}
                                    {% else %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Accounting (5%)', '5') }}
                                    {% endif %}
                                    {% if flair == "gaslight" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Alienism (1%)', '1') }}
                                    {% endif %}
                                    {% if flair == "trails" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Animal Handling (5%)', '5') }}
                                    {% elseif flair == "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Animal Handling (15%)', '15') }}
                                    {% endif %}
                                    {% if flair != "ages" and flair != "1930s" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Anthropology (1%)', '1') }}
                                    {% endif %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Appraise (5%)', '5') }}
                                    {% if flair != "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Archaeology (1%)', '1') }}
                                    {% endif %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Art / Craft (5%)', '5') }}
                                    {% if flair == "regency" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Astronomy (1%)', '1') }}
                                    {% endif %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Charm (15%)', '15') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Climb (20%)', '20') }}
                                    {% if flair == "1930s" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Computer Use (0%)', '0') }}
                                    {% elseif flair == "modern" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Computer Use (5%)', '5') }}
                                    {% endif %}
                                    {% if flair != "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Credit Rating (0%)', '0') }}
                                    {% endif %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Cthulhu Mythos (0%)', '0') }}
                                    {% if flair == "regency" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Dancing (DEX/5%)', variables.dexterity|default // 5) }}
                                    {% endif %}
                                    {% if flair == "1930s" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Demolitions (1%)', '1') }}
                                    {% endif %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Disguise (5%)', '5') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), dodge, 'Dodge (DEX/2%)', variables.dexterity|default // 2) }}
                                    {% if flair == "1930s" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Diving (1%)', '1') }}
                                    {% endif %}
                                    {% if flair == "1920s" or flair == "modern" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Drive Car (20%)', '20') }}
                                    {% elseif flair == "1930s" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Drive Auto (20%)', '20') }}
                                    {% elseif flair == "regency" or flair == "gaslight" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Drive Carriage (20%)', '20') }}
                                    {% elseif flair == "trails" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Drive Wagon/Coach (20%)', '20') }}
                                    {% elseif flair == "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Drive Horses/Oxen (20%)', '20') }}
                                    {% endif %}
                                    {% if flair == "trails" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Elec.Repair (0%)', '0') }}
                                    {% elseif flair != "ages" and flair != "gaslight" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Elec.Repair (10%)', '10') }}
                                    {% endif %}
                                    {% if flair == "modern" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Electronics (1%)', '1') }}
                                    {% endif %}
                                    {% if flair == "regency" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Etiquette (INT/5%)', variables.intelligence|default // 5) }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Fashion (10%)', '10') }}
                                    {% endif %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Fast Talk (5%)', '5') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Fighting (Brawl)(25%)', '25') }}
                                    {% if flair == "regency" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Firearms (Pistol)(20%)', '20') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Firearms (Rifle/Blunderbuss)(25%)', '25') }}
                                    {% elseif flair != "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Firearms (Handgun)(20%)', '20') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Firearms (Rifle/Shotgun)(25%)', '25') }}
                                    {% endif %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'First Aid (30%)', '30') }}
                                    {% if flair == "regency" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Gaming (10%)', '10') }}
                                    {% elseif flair == "trails" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Gambling (10%)', '10') }}
                                    {% endif %}
                                    {% if flair != "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'History (5%)', '5') }}
                                    {% endif %}
                                    {% if flair == "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Insight (5%)', '5') }}
                                    {% endif %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Intimidate (15%)', '15') }}
                                    {% if flair == "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Jump (25%)', '25') }}
                                    {% else %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Jump (20%)', '20') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Language (Other)(1%)', '1') }}
                                    {% endif %}
                                </table>
                            </div>
                            <div class="col-12 col-md-12 col-lg-4">
                                <table class="skilltable">
                                    {% if flair != "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Language (Own)(EDU)', variables.education|default ) }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Law (5%)', '5') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Library Use (20%)', '20') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Listen (20%)', '20') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Locksmith (1%)', '1') }}
                                    {% if flair == "gaslight" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Mech. Repair (20%)', '20') }}
                                    {% else %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Mech. Repair (10%)', '10') }}
                                    {% endif %}
                                    {% endif %}
                                    {% if flair == "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Library Use (5%)', '5') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Listen (25%)', '25') }}
                                    {% endif %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Medicine (1%)', '1') }}
                                    {% if flair == "trails" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Natural World (20%)', '20') }}
                                    {% elseif flair != "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Natural World (10%)', '10') }}
                                    {% endif %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Navigate (10%)', '10') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Occult (5%)', '5') }}
                                    {% if flair != "regency" and flair != "ages" and flair != "1930s" and flair != "modern" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Op.Hv.Machine (1%)', '1') }}
                                    {% endif %}
                                    {% if flair == "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Persuade (15%)', '15') }}
                                    {% else %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Persuade (10%)', '10') }}
                                    {% endif %}
                                    {% if flair == "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Pilot Boat (1%)', '1') }}
                                    {% else %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Pilot (1%)', '1') }}
                                    {% endif %}
                                    {% if flair != "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Psychology (10%)', '10') }}
                                    {% endif %}
                                    {% if flair != "trails" and flair != "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Psychoanalysis (1%)', '1') }}
                                    {% endif %}
                                    {% if flair == "1930s" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Read Lips (1%)', '1') }}
                                    {% endif %}
                                    {% if flair == "regency" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Reassure (APP/5%)', variables.appearance|default // 5) }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Religion (10%)', '10') }}
                                    {% endif %}
                                    {% if flair == "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Repair/Devise (20%)', '20') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Religion (20%)', '20') }}
                                    {% endif %}
                                    {% if flair == "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Ride Horse (5%)', '5') }}
                                    {% elseif flair == "trails" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Ride (15%)', '15') }}
                                    {% elseif flair == "gaslight" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Ride (20%)', '20') }}
                                    {% else %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Ride (5%)', '5') }}
                                    {% endif %}
                                    {% if flair == "trails" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Rope Use (5%)', '5') }}
                                    {% endif %}
                                    {% if flair == "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Sleight of Hand (25%)', '25') }}
                                    {% else %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Science (1%)', '1') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Sleight of Hand (10%)', '10') }}
                                    {% endif %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Spot Hidden (25%)', '25') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Stealth (20%)', '20') }}
                                    {% if flair == "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Swim (25%)', '25') }}
                                    {% elseif flair == "gaslight" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Survival (10%)', '10') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Swim (30%)', '30') }}
                                    {% else %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Survival (10%)', '10') }}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Swim (20%)', '20') }}
                                    {% endif %}
                                </table>
                            </div>
                            <div class="col-12 col-md-12 col-lg-4">
                                <table class="skilltable">
                                    {% if flair != "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Throw (20%)', '20') }}
                                    {% endif %}
                                    {% if flair == "ages" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Throw (25%)', '25') }}
                                    {% elseif flair == "gaslight" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Throw (20%)', '20') }}
                                    {% endif %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Track (10%)', '10') }}
                                    {% if flair == "trails" %}
                                    {% set i = i + 1 %}{{ sheet.genSkill(i, attribute(variables, "skill_name_" ~ i), attribute(variables, "skill_value_" ~ i), 'Trap (10%)', '10') }}
                                    {% endif %}
                                    {% for x in i+1 .. 66 %}
                                        {{ sheet.genSkill(x, attribute(variables, "skill_name_" ~ x), attribute(variables, "skill_value_" ~ x), '', '') }}
                                    {% endfor %}
                                </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-md-6 col-lg-4">
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Personal Description</span></div>
                <div class="card-body txt">
                    {{ variables.personal is defined ? variables.personal|nl2br }}
                </div>
            </div>
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Ideology / Beliefs</span></div>
                <div class="card-body txt">
                    {{ variables.beliefs is defined ? variables.beliefs|nl2br }}
                </div>
            </div>
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Significant People</span></div>
                <div class="card-body txt">
                    {{ variables.people is defined ? variables.people|nl2br }}
                </div>
            </div>
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Meaningful Locations</span></div>
                <div class="card-body txt">
                    {{ variables.locations is defined ? variables.locations|nl2br }}
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-4">
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Treasured Possessions</span></div>
                <div class="card-body txt">
                    {{ variables.treasures is defined ? variables.treasures|nl2br }}
                </div>
            </div>
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Traits</span></div>
                <div class="card-body txt">
                    {{ variables.traits is defined ? variables.traits|nl2br }}
                </div>
            </div>
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Injuries and Scars</span></div>
                <div class="card-body txt">
                    {{ variables.injuries is defined ? variables.injuries|nl2br }}
                </div>
            </div>
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Phobias and Manias</span></div>
                <div class="card-body txt">
                    {{ variables.phobias is defined ? variables.phobias|nl2br }}
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-4">
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Arcane Tomes, Spells and Artifacts</span></div>
                <div class="card-body txt">
                    {{ variables.tomes is defined ? variables.tomes|nl2br }}
                </div>
            </div>
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Encounters with Strange Entities</span></div>
                <div class="card-body txt">
                    {{ variables.encounters is defined ? variables.encounters|nl2br }}
                </div>
            </div>
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Gear and Possessions</span></div>
                <div class="card-body txt">
                    {{ variables.gear is defined ? variables.gear|nl2br }}
                </div>
            </div>
            <div class="card my-2 of">
                <div class="card-header head-bar"><span class="wbg">Cash and Assets</span></div>
                <div class="card-body txt">
                    Spending Level: <strong>{{ variables.spending_level is defined ? variables.spending_level|number_format }}</strong><br>
                    Money: <strong>{{ variables.money is defined ? variables.money|number_format }}</strong><br>
                    {{ variables.assets is defined ? variables.assets|nl2br }}
                </div>
            </div>
        </div>
    </div>
    <div class="row"><div class="col-12 text-center"><small>Call of Cthulhu &copy; by Chaosium, Inc.<br><a href="/w/sheet-creation/a/sheet-list">Call of Cthulhu Edition 7 Character Sheet v1.2</a>, made by Tillerz - Updated: 2025-05-11</small></div></div>
</div>